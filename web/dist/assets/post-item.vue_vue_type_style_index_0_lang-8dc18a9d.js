import{p as L,a as M,_ as O,b as V,c as D}from"./content-7dbf66ba.js";import{d as H,c as P,r as S,e as n,f,k as o,al as F,w as a,F as I,u as A,y as k,bf as _,j as u,A as r,x as p,q as i,Y as l}from"./@vue-a481fc63.js";import{u as E}from"./vuex-44de225f.js";import{u as R}from"./vue-router-e5a2430e.js";import{c as Y}from"./formatTime-4210fcd1.js";import{j as G,l as J,m as K}from"./@vicons-9939c40b.js";import{o as Q,M as U,j as W,a as X,L as Z}from"./naive-ui-0c25505f.js";const ee={class:"nickname-wrap"},te={class:"username-wrap"},se={class:"item-header-extra"},ae={class:"timestamp"},ne=["innerHTML"],oe={class:"opt-item"},ie={class:"opt-item"},de=H({__name:"post-item",props:{post:{}},setup(x){const C=x,d=R(),b=E(),e=P(()=>{let s=Object.assign({texts:[],imgs:[],videos:[],links:[],attachments:[],charge_attachments:[]},C.post);return s.contents.map(t=>{(+t.type==1||+t.type==2)&&s.texts.push(t),+t.type==3&&s.imgs.push(t),+t.type==4&&s.videos.push(t),+t.type==6&&s.links.push(t),+t.type==7&&s.attachments.push(t),+t.type==8&&s.charge_attachments.push(t)}),s}),v=s=>{d.push({name:"post",query:{id:s}})},w=(s,t)=>{if(s.target.dataset.detail){const c=s.target.dataset.detail.split(":");if(c.length===2){b.commit("refresh"),c[0]==="tag"?d.push({name:"home",query:{q:c[1],t:"tag"}}):d.push({name:"user",query:{s:c[1]}});return}}v(t)};return(s,t)=>{const c=Q,z=S("router-link"),h=U,y=M,$=O,q=V,j=D,g=W,B=X,N=Z;return n(),f("div",{class:"post-item",onClick:t[3]||(t[3]=m=>v(e.value.id))},[o(N,{"content-indented":""},F({avatar:a(()=>[o(c,{round:"",size:30,src:e.value.user.avatar},null,8,["src"])]),header:a(()=>[u("span",ee,[o(z,{onClick:t[0]||(t[0]=k(()=>{},["stop"])),class:"username-link",to:{name:"user",query:{s:e.value.user.username}}},{default:a(()=>[r(p(e.value.user.nickname),1)]),_:1},8,["to"])]),u("span",te," @"+p(e.value.user.username),1),e.value.is_top?(n(),i(h,{key:0,class:"top-tag",type:"warning",size:"small",round:""},{default:a(()=>[r(" 置顶 ")]),_:1})):l("",!0),e.value.visibility==1?(n(),i(h,{key:1,class:"top-tag",type:"error",size:"small",round:""},{default:a(()=>[r(" 私密 ")]),_:1})):l("",!0),e.value.visibility==2?(n(),i(h,{key:2,class:"top-tag",type:"info",size:"small",round:""},{default:a(()=>[r(" 好友可见 ")]),_:1})):l("",!0)]),"header-extra":a(()=>[u("div",se,[u("span",ae,p(e.value.ip_loc?e.value.ip_loc+" · ":e.value.ip_loc)+" "+p(_(Y)(e.value.created_on)),1)])]),footer:a(()=>[e.value.attachments.length>0?(n(),i(y,{key:0,attachments:e.value.attachments},null,8,["attachments"])):l("",!0),e.value.charge_attachments.length>0?(n(),i(y,{key:1,attachments:e.value.charge_attachments,price:e.value.attachment_price},null,8,["attachments","price"])):l("",!0),e.value.imgs.length>0?(n(),i($,{key:2,imgs:e.value.imgs},null,8,["imgs"])):l("",!0),e.value.videos.length>0?(n(),i(q,{key:3,videos:e.value.videos},null,8,["videos"])):l("",!0),e.value.links.length>0?(n(),i(j,{key:4,links:e.value.links},null,8,["links"])):l("",!0)]),action:a(()=>[o(B,{justify:"space-between"},{default:a(()=>[u("div",oe,[o(g,{size:"18",class:"opt-item-icon"},{default:a(()=>[o(_(G))]),_:1}),r(" "+p(e.value.upvote_count),1)]),u("div",{class:"opt-item",onClick:t[2]||(t[2]=k(m=>v(e.value.id),["stop"]))},[o(g,{size:"18",class:"opt-item-icon"},{default:a(()=>[o(_(J))]),_:1}),r(" "+p(e.value.comment_count),1)]),u("div",ie,[o(g,{size:"18",class:"opt-item-icon"},{default:a(()=>[o(_(K))]),_:1}),r(" "+p(e.value.collection_count),1)])]),_:1})]),_:2},[e.value.texts.length>0?{name:"description",fn:a(()=>[(n(!0),f(I,null,A(e.value.texts,m=>(n(),f("span",{key:m.id,class:"post-text",onClick:t[1]||(t[1]=k(T=>w(T,e.value.id),["stop"])),innerHTML:_(L)(m.content).content},null,8,ne))),128))]),key:"0"}:void 0]),1024)])}}});export{de as _};
